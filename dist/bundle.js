(()=>{"use strict";var e={792:(e,n,t)=>{t.d(n,{A:()=>s});var o=t(601),a=t.n(o),r=t(314),i=t.n(r)()(a());i.push([e.id,'\n:root {\n    --primary-color: #1da1f2;\n    --secondary-color: #657786;\n    --background-color: #ffffff;\n    --text-color: #14171a;\n  }\n  \n  body {\n    font-family: Arial, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: var(--background-color);\n    color: var(--text-color);\n  }\n  \n  #app {\n    display: grid;\n    grid-template-rows: auto auto auto auto 1fr;\n    grid-template-areas:\n      "header"\n      "note-input"\n      "sort-search"\n      "toggle-sort-search"\n      "notes-view";\n    height: 100vh;\n  }\n  \n  #note-input {\n    margin-bottom: 20px;\n  }\n  \n  #note-input textarea {\n    width: 100%;\n    height: 100px;\n    resize: vertical;\n  }\n  \n  #note-input input {\n    width: 100%;\n    margin-top: 10px;\n  }\n  \n  #note-list {\n    margin-top: 20px;\n  }\n  \n  #search-input {\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  \n  #tag-select {\n    width: 100%;\n    margin-bottom: 10px;\n  }\n  \n  #notes-container {\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    grid-gap: 20px;\n  }\n  \n  .note {\n    border: 1px solid #ccc;\n    padding: 10px;\n    position: relative;\n    background-color: var(--background-color);\n    border-radius: 8px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    margin-bottom: 20px;\n  }\n  \n  .note-text {\n    margin-bottom: 5px;\n  }\n  \n  .note-tags {\n    font-size: 12px;\n    color: #888;\n  }\n  \n  .note-actions {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    opacity: 0;\n    transition: opacity 0.3s;\n  }\n  \n  .note:hover .note-actions {\n    opacity: 1;\n  }\n  \n  .highlight {\n    background-color: yellow;\n  }\n  \n  #settings {\n    margin-top: 10px;\n    display: flex;\n    justify-content: flex-start;\n  }\n    \n  #settings label {\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n  }\n    \n  #settings input[type="checkbox"] {\n    margin-right: 5px;\n  }\n  \n  #chat-window {\n    display: none;\n    width: 300px;\n    background-color: white;\n    border: 1px solid var(--secondary-color);\n    border-radius: 8px;\n    padding: 20px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  \n  #chat-window.open {\n    display: block;\n  }\n  \n  .chat-message {\n    margin-bottom: 10px;\n  }\n  \n  .user-message {\n    text-align: right;\n  }\n  \n  .assistant-message {\n    text-align: left;\n  }\n  \n  #chat-input-container {\n    display: flex;\n    margin-top: 10px;\n  }\n  \n  #chat-input {\n    flex: 1;\n    padding: 5px;\n  }\n  .info-text {\n    font-size: 12px;\n    color: var(--secondary-color);\n    margin-bottom: 10px;\n  }\n  #send-message, #reset-chat {\n    margin-left: 10px;\n    padding: 8px 16px;\n    background-color: var(--primary-color);\n    color: #ffffff;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n  \n  #send-question {\n    width: 18%;\n    padding: 5px;\n  }\n  \n  #api-key-container {\n    margin-bottom: 10px;\n  }\n  \n  #api-key-input {\n    width: 300px;\n    padding: 5px;\n  }\n  \n  #set-api-key {\n    padding: 5px 10px;\n  }\n  \n  #insights-container {\n    margin-top: 20px;\n  }\n  \n  #insights-output {\n    margin-top: 10px;\n    white-space: pre-wrap;\n  }\n  \n  #note-selection {\n    margin-top: 20px;\n  }\n  \n  .selected-note {\n    background-color: #f0f0f0;\n  }\n  \n  .hidden {\n    display: none;\n  }\n  \n  #loading-spinner {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    text-align: center;\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 20px;\n    border-radius: 5px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);\n  }\n  \n  .spinner {\n    width: 40px;\n    height: 40px;\n    border-radius: 50%;\n    border: 3px solid #ccc;\n    border-top-color: #333;\n    animation: spin 1s infinite linear;\n    margin: 0 auto;\n  }\n  \n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n  \n  .spinner-text {\n    margin-top: 10px;\n  }\n  \n  #error-message {\n    position: fixed;\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%);\n    background-color: #f44336;\n    color: white;\n    padding: 10px;\n    border-radius: 5px;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);\n  }\n  \n  .note-text {\n    margin-bottom: 10px;\n    padding: 5px;\n    border: 1px solid transparent;\n    outline: none;\n  }\n  \n  .note-text[contenteditable="true"] {\n    border-color: #ccc;\n    background-color: #f9f9f9;\n  }\n  \n  .note-tags[contenteditable="true"] {\n    border-color: #ccc;\n    background-color: #f9f9f9;\n    padding: 5px;\n    outline: none;\n  } \n  \n  /* Dark mode styles */\n  body.dark-mode {\n    --background-color: #14171a;\n    --text-color: #ffffff;\n  }\n  \n  body.dark-mode .note {\n    background-color: #1c2938;\n    box-shadow: 0 1px 3px rgba(255, 255, 255, 0.12), 0 1px 2px rgba(255, 255, 255, 0.24);\n  }\n#app {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: auto auto auto 1fr;\n    height: 100vh;\n  }\n  \n  #header-banner {\n    background-color: #1da1f2;\n    padding: 20px;\n    color: white;\n  }\n  \n  #note-input {\n    margin: 20px;\n    padding: 20px;\n    background-color: var(--background-color);\n    border-radius: 8px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  \n  #sort-search-container {\n    grid-area: sort-search;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 20px;\n    padding: 20px;\n    background-color: var(--background-color);\n    border-radius: 8px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  \n  #search-container {\n    display: flex;\n    align-items: center;\n  }\n  \n  #notes-view {\n    grid-area: notes-view;\n    margin: 20px;\n    padding: 20px;\n    background-color: var(--background-color);\n    border-radius: 8px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    overflow-y: auto;\n  }\n  \n  #toggle-flyout {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 10px 20px;\n    background-color: var(--primary-color);\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n    z-index: 10000; /* Add a higher z-index value */\n  }\n  \n  #toggle-flyout:hover {\n    background-color: #0c87c5;\n  }\n  \n  \n  #flyout-panel {\n    position: fixed;\n    bottom: 0;\n    right: -20vw;\n    width: 20vw;\n    height: 95vh;\n    background-color: var(--background-color);\n    border-left: 1px solid var(--secondary-color);\n    border-top: 1px solid var(--secondary-color);\n    transition: right 0.3s ease-in-out;\n  }\n  \n  #flyout-panel.open {\n    right: 0;\n  }\n\n  #chat-widget {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    z-index: 9999;\n  }\n  \n  #toggle-chat {\n    padding: 10px 20px;\n    background-color: var(--primary-color);\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  #toggle-chat:hover {\n    background-color: #0c87c5;\n  }\n  \n  #chat-window {\n    display: none;\n    width: 300px;\n    background-color: white;\n    border: 1px solid var(--secondary-color);\n    border-radius: 8px;\n    padding: 20px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n  }\n  \n  #chat-window.open {\n    display: block;\n  }\n  \n  #chat-window.open {\n    display: block;\n  }\n\n  #toggle-sort-search {\n    grid-area: toggle-sort-search;\n    margin-bottom: 10px;\n    padding: 10px 20px;\n    background-color: var(--primary-color);\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n  }\n  \n  #toggle-sort-search:hover {\n    background-color: #0c87c5;\n  }',""]);const s=i},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,a,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);o&&i[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),n.push(l))}},n}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var n=[];function t(e){for(var t=-1,o=0;o<n.length;o++)if(n[o].identifier===e){t=o;break}return t}function o(e,o){for(var r={},i=[],s=0;s<e.length;s++){var c=e[s],d=o.base?c[0]+o.base:c[0],l=r[d]||0,p="".concat(d," ").concat(l);r[d]=l+1;var g=t(p),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==g)n[g].references++,n[g].updater(u);else{var m=a(u,o);o.byIndex=s,n.splice(s,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function a(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,a){var r=o(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var s=t(r[i]);n[s].references--}for(var c=o(e,a),d=0;d<r.length;d++){var l=t(r[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}r=c}}},659:e=>{var n={};e.exports=function(e,t){var o=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,a&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var r=t.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(o,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={id:o,exports:{}};return e[o](r,r.exports,t),r.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0,(()=>{var e=t(72),n=t.n(e),o=t(825),a=t.n(o),r=t(659),i=t.n(r),s=t(56),c=t.n(s),d=t(540),l=t.n(d),p=t(113),g=t.n(p),u=t(792),m={};m.styleTagTransform=g(),m.setAttributes=c(),m.insert=i().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=l(),n()(u.A,m),u.A&&u.A.locals&&u.A.locals;let h=[],x=[],f="claude-3-opus-20240229";const y=document.getElementById("note-input"),v=document.getElementById("note-text"),b=document.getElementById("note-tags"),E=document.getElementById("save-note"),w=document.getElementById("search-input"),k=document.getElementById("tag-select"),L=document.getElementById("notes-container"),I=document.getElementById("select-notes-filter");document.addEventListener("DOMContentLoaded",(()=>{const e=localStorage.getItem("notes");function n(){const e=function(){const e=w.value.toLowerCase(),n=Array.from(k.selectedOptions).map((e=>e.value));return""===e&&0===n.length?h:h.filter((t=>(t.text.toLowerCase().includes(e)||t.tags.some((n=>n.toLowerCase().includes(e))))&&(0===n.length||n.every((e=>t.tags.includes(e))))))}();L.innerHTML="",e.forEach((e=>{const o=document.createElement("div");o.classList.add("note"),o.addEventListener("click",(()=>{d.checked=!d.checked,d.checked?x.push(e):x=x.filter((n=>n.id!==e.id)),N()})),x.find((n=>n.id===e.id))?o.classList.add("selected-note"):o.classList.remove("selected-note");const a=document.createElement("div");a.classList.add("note-text"),a.innerHTML=function(e,n){const t=new RegExp(n,"gi");return e.replace(t,'<span class="highlight">$&</span>')}(e.text,w.value),a.textContent=e.text,o.appendChild(a);const r=document.createElement("div");r.classList.add("note-tags"),r.textContent=e.tags.join(", "),o.appendChild(r);const i=document.createElement("div");i.classList.add("note-actions");const s=document.createElement("button");s.classList.add("edit-note"),s.textContent="Edit",s.addEventListener("click",(()=>{!function(e,n,t,o,a){t.setAttribute("contenteditable","true"),o.setAttribute("contenteditable","true"),t.focus(),a.textContent="Save";const r={clickOutsideHandler:i=>{n.contains(i.target)||F(e,n,t,o,a,r)},keydownHandler:i=>{(i.ctrlKey||i.metaKey)&&"Enter"===i.key&&(i.preventDefault(),F(e,n,t,o,a,r))}};n.addEventListener("click",r.clickOutsideHandler),n.addEventListener("keydown",r.keydownHandler)}(e.id,o,a,r,s)})),i.appendChild(s);const c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",(()=>{var o;o=e.id,h=h.filter((e=>e.id!==o)),t(),n()})),i.appendChild(c);const d=document.createElement("input");d.type="checkbox",d.addEventListener("change",(()=>{d.checked?x.push(e):x=x.filter((n=>n.id!==e.id)),N()})),o.appendChild(d),o.appendChild(i),L.appendChild(o),I.innerHTML="";const l=[...new Set(h.flatMap((e=>e.tags)))];l.forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,I.appendChild(n)}))})),N()}function t(){localStorage.setItem("notes",JSON.stringify(h)),function(){const e=[...new Set(h.flatMap((e=>e.tags)))];k.innerHTML="",e.forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,k.appendChild(n)}))}()}async function o(){const e=y.getAttribute("data-note-id"),o=v.value.trim();let a=b.value.trim().split(",").map((e=>e.trim()));if(i){const e=await async function(e){if(!i||""===m)return[];try{j();const n=[{role:"user",content:`Please generate relevant tags for the following note:\n\n${e}\n\nTags:`}];return(await s(m,f,n,1024)).content[0].text.trim().split(",").map((e=>e.trim()))}catch(e){return z("Error auto-tagging note: "+e.message),[]}finally{O()}}(o);a=[...a,...e]}if(""!==o){if(e){const n=h.find((n=>n.id===Number(e)));n&&(n.text=o,n.tags=a)}else{const e={id:Date.now(),text:o,tags:a};h.push(e)}t(),v.value="",b.value="",n()}}async function a(e,r,i){const s=h.find((n=>n.id===e));s&&(s.text=r,s.tags=i,t(),n(),E.removeEventListener("click",(()=>{a(e,r,i)})),E.addEventListener("click",o))}e?(h=JSON.parse(e),n()):(h=[{id:1,text:"Note 1",tags:["tag1","tag2"]},{id:2,text:"Note 2",tags:["tag2","tag3"]},{id:3,text:"Note 3",tags:["tag1","tag3"]},{id:4,text:"Note 4",tags:["tag4"]},{id:5,text:"Note 5",tags:["tag2","tag4"]},{id:6,text:"Note 6",tags:["tag1","tag4"]},{id:7,text:"Note 7",tags:["tag3"]},{id:8,text:"Note 8",tags:["tag1","tag2","tag3"]},{id:9,text:"Note 9",tags:["tag4"]}],t(),n()),function(){const e=localStorage.getItem("notes");e&&(h=JSON.parse(e))}(),n(),document.addEventListener("keydown",(e=>{e.ctrlKey&&e.shiftKey&&"N"===e.key&&(y.classList.toggle("hidden"),v.focus())})),E.addEventListener("click",o),w.addEventListener("input",n),k.addEventListener("change",n);const r=document.getElementById("auto-tag-setting");let i=!1;async function s(e,n,t,o){try{const a=await fetch("/api/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:e,model:n,messages:t,max_tokens:o})});if(!a.ok)throw new Error(`API request failed with status ${a.status}`);return await a.json()}catch(e){throw console.error("Error calling Anthropic API:",e),e}}r.addEventListener("change",(()=>{i=r.checked}));const c=document.getElementById("chat-messages"),d=document.getElementById("chat-input"),l=document.getElementById("send-question"),p=document.getElementById("reset-chat");let g=[];function u(e,n){const t=document.createElement("div");t.classList.add("chat-message",`${e}-message`),t.textContent=n,c.appendChild(t),c.scrollTop=c.scrollHeight}l.addEventListener("click",(async function(){const e=d.value.trim();if(""===e)return;d.value="",u("user",e);let n="";try{if(j(),x.length>0){const t=[{role:"user",content:`Here are some relevant notes:\n\n${x.filter((n=>n.text.toLowerCase().includes(e.toLowerCase())||n.tags.some((n=>n.toLowerCase().includes(e.toLowerCase()))))).map((e=>`Note: ${e.text}\nTags: ${e.tags.join(", ")}`)).join("\n\n")}\n\nQuestion: ${e}\n\nAnswer:`}];n=(await s(m,f,t,1024)).content[0].text.trim()}else{const t=[{role:"user",content:e}];n=(await s(m,f,t,1024)).content[0].text.trim()}}catch(e){z("Error sending message: "+e.message)}finally{O()}u("assistant",n),g.push({user:e,assistant:n})})),p.addEventListener("click",(function(){c.innerHTML="",g=[],d.value=""}));let m="";const C=document.getElementById("api-key-input");document.getElementById("set-api-key").addEventListener("click",(()=>{m=C.value.trim(),C.value=""}));const B=document.getElementById("summarize-notes"),A=document.getElementById("surface-insights"),$=document.getElementById("insights-output");function N(){const e=document.getElementById("selected-notes");e.innerHTML="",x.forEach((n=>{const t=document.createElement("div");t.textContent=n.text,e.appendChild(t)}))}B.addEventListener("click",(async()=>{const{summary:e,timestamp:n}=await async function(){if(""===m)return"Please enter your Anthropic API key.";if(0!==x.length)try{j();const e=x.map((e=>`Note: ${e.text}\nTags: ${e.tags.join(", ")}`)).join("\n\n"),n=[{role:"user",content:`Please provide a ${document.getElementById("summary-length").value} summary of the following notes:\n\n${e}\n\nSummary:`}],t=(await s(m,f,n,1024)).content[0].text.trim(),o=(new Date).toLocaleString();return{summary:`${t}\nGenerated at: ${o}`,timestamp:o}}catch(e){return z("Error summarizing notes: "+e.message),{summary:"",timestamp:""}}finally{O()}else z("Please select notes first.")}();$.innerHTML=`\n    <h4>Summary:</h4>\n    <p>${e}</p>\n    <p>Generated at: ${n}</p>\n  `})),A.addEventListener("click",(async()=>{const{insights:e,timestamp:n}=await async function(){if(""===m)return"Please enter your Anthropic API key.";if(0!==x.length)try{j();const e=x.map((e=>`Note: ${e.text}\nTags: ${e.tags.join(", ")}`)).join("\n\n"),n=[{role:"user",content:`Please provide ${document.getElementById("insights-type").value} based on the following notes:\n\n${e}\n\nInsights:`}],t=(await s(m,f,n,1024)).content[0].text.trim(),o=(new Date).toLocaleString();return{insights:`${t}\nGenerated at: ${o}`,timestamp:o}}catch(e){return z("Error surfacing insights: "+e.message),{insights:"",timestamp:""}}finally{O()}else z("Please select notes first.")}();$.innerHTML=`\n    <h4>Insights:</h4>\n    <p>${e}</p>\n    <p>Generated at: ${n}</p>\n  `}));const T=document.getElementById("select-all-notes"),S=document.getElementById("clear-selected-notes");T.addEventListener("click",(()=>{confirm("Are you sure you want to select all notes?")&&(x=[...h],n())})),S.addEventListener("click",(()=>{confirm("Are you sure you want to clear the selected notes?")&&(x=[],n())}));const H=document.getElementById("model-select");H.addEventListener("change",(()=>{f=H.value}));const M=document.getElementById("select-notes-search");function P(e){const n=document.getElementById("selected-notes");n.innerHTML="",e.forEach((t=>{const o=document.createElement("div");o.textContent=t.text,o.addEventListener("click",(()=>{x.find((e=>e.id===t.id))?x=x.filter((e=>e.id!==t.id)):x.push(t),P(e)})),x.find((e=>e.id===t.id))&&o.classList.add("selected-note"),n.appendChild(o)}));const t=document.createElement("div");t.textContent=`Selected: ${x.length} / ${e.length}`,n.appendChild(t)}function j(){document.getElementById("loading-spinner").classList.remove("hidden")}function O(){document.getElementById("loading-spinner").classList.add("hidden")}function z(e){const n=document.getElementById("error-message");n.textContent=e,n.classList.remove("hidden"),setTimeout((()=>{n.classList.add("hidden")}),3e3)}M.addEventListener("input",(()=>{const e=M.value.toLowerCase();P(h.filter((n=>n.text.toLowerCase().includes(e)||n.tags.some((n=>n.toLowerCase().includes(e))))))})),I.addEventListener("change",(()=>{const e=Array.from(I.selectedOptions).map((e=>e.value)),n=M.value.toLowerCase(),t=h.filter((t=>(""===n||t.text.toLowerCase().includes(n)||t.tags.some((e=>e.toLowerCase().includes(n))))&&function(e,n){return 0===n.length?e:e.filter((e=>n.every((n=>e.tags.includes(n)))))}([t],e).length>0));P(t)}));const D=document.getElementById("save-summary"),q=document.getElementById("export-summary"),J=document.getElementById("save-insights"),K=document.getElementById("export-insights");D.addEventListener("click",(()=>{})),q.addEventListener("click",(()=>{})),J.addEventListener("click",(()=>{})),K.addEventListener("click",(()=>{})),D.addEventListener("click",(()=>{alert("No summary available to save.")})),q.addEventListener("click",(()=>{alert("No summary available to export.")})),J.addEventListener("click",(()=>{alert("No insights available to save.")})),K.addEventListener("click",(()=>{alert("No insights available to export.")}));const G=document.getElementById("sort-select");function F(e,n,o,r,i,s){o.removeAttribute("contenteditable"),r.removeAttribute("contenteditable"),a(e,o.textContent.trim(),r.textContent.trim().split(",").map((e=>e.trim()))),t(),i.textContent="Edit",n.removeEventListener("click",s.clickOutsideHandler),n.removeEventListener("keydown",s.keydownHandler)}G.addEventListener("change",(()=>{!function(e){switch(e){case"date-desc":h.sort(((e,n)=>n.id-e.id));break;case"date-asc":h.sort(((e,n)=>e.id-n.id));break;case"title-asc":h.sort(((e,n)=>e.text.localeCompare(n.text)));break;case"title-desc":h.sort(((e,n)=>n.text.localeCompare(e.text)))}n()}(G.value)})),document.getElementById("toggle-dark-mode").addEventListener("click",(function(){document.body.classList.toggle("dark-mode")}));const R=document.getElementById("toggle-flyout"),_=document.getElementById("flyout-panel"),U=document.getElementById("toggle-chat"),Q=document.getElementById("chat-window");U.addEventListener("click",(()=>{if(Q.classList.toggle("open"),Q.classList.contains("open")){const e=document.createElement("div");e.classList.add("info-text"),e.textContent="Select notes in the Flyout to query those notes with the LLM.",c.prepend(e)}else{const e=c.querySelector(".info-text");e&&e.remove()}})),R.addEventListener("click",(function(){_.classList.toggle("open")}));const X=document.getElementById("toggle-sort-search"),V=document.getElementById("sort-search-container"),W=document.getElementById("sorting-options"),Y=document.getElementById("search-container");document.getElementById("notes-view"),V.classList.toggle("hidden"),W.classList.toggle("hidden"),Y.classList.toggle("hidden"),w.classList.toggle("hidden"),k.classList.toggle("hidden"),V.style.maxHeight="0",V.style.margin="0",V.style.padding="0",X.addEventListener("click",(()=>{V.classList.toggle("hidden"),W.classList.toggle("hidden"),Y.classList.toggle("hidden"),w.classList.toggle("hidden"),k.classList.toggle("hidden"),V.classList.contains("hidden")?(V.style.maxHeight="0",V.style.margin="0",V.style.padding="0"):(V.style.maxHeight=`${V.scrollHeight}px`,V.style.margin="20px",V.style.padding="20px")}))}))})()})();